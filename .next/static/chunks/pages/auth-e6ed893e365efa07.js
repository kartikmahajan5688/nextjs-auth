(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[473],{8020:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth",function(){return n(1391)}])},1391:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var o=n(5893),r=n(1163),s=n(8633),i=n(7294),a=n(237),c=n.n(a);async function u(e,t){let n=await fetch("/api/auth/signup",{method:"POST",body:JSON.stringify({email:e,password:t}),headers:{"Content-Type":"application/json"}}),o=await n.json();if(!n.ok)throw Error(o.message||"Something went wrong!");return o}var l=function(){let e=(0,i.useRef)(),t=(0,i.useRef)(),[n,a]=(0,i.useState)(!0),l=(0,r.useRouter)();async function h(o){o.preventDefault();let r=e.current.value,i=t.current.value;if(n){let e=await (0,s.zB)("credentials",{redirect:!1,email:r,password:i});e.error||l.replace("/profile")}else try{let e=await u(r,i);console.log(e)}catch(e){console.log(e)}}return(0,o.jsxs)("section",{className:c().auth,children:[(0,o.jsx)("h1",{children:n?"Login":"Sign Up"}),(0,o.jsxs)("form",{onSubmit:h,children:[(0,o.jsxs)("div",{className:c().control,children:[(0,o.jsx)("label",{htmlFor:"email",children:"Your Email"}),(0,o.jsx)("input",{type:"email",id:"email",required:!0,ref:e})]}),(0,o.jsxs)("div",{className:c().control,children:[(0,o.jsx)("label",{htmlFor:"password",children:"Your Password"}),(0,o.jsx)("input",{type:"password",id:"password",required:!0,ref:t})]}),(0,o.jsxs)("div",{className:c().actions,children:[(0,o.jsx)("button",{children:n?"Login":"Create Account"}),(0,o.jsx)("button",{type:"button",className:c().toggle,onClick:function(){a(e=>!e)},children:n?"Create new account":"Login with existing account"})]})]})]})},h=function(){let[e,t]=(0,i.useState)(!0),n=(0,r.useRouter)();return((0,i.useEffect)(()=>{(0,s.Gg)().then(e=>{e?n.replace("/"):t(!1)})},[n]),e)?(0,o.jsx)("p",{children:"Loading..."}):(0,o.jsx)(l,{})}},237:function(e){e.exports={auth:"auth-form_auth__vGmwv",control:"auth-form_control__FKiF3",actions:"auth-form_actions__gmh9d",toggle:"auth-form_toggle__lcRXk"}},1163:function(e,t,n){e.exports=n(8355)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8020)}),_N_E=e.O()}]);